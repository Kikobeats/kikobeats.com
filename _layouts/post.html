---
layout: default
---

<main class="sans-serif near-black center pa4-l pa3" style="max-width: 800px">
  <div class="mb4">
    <a class="link blue dim f5 lh-title" href="/blog">← Blog</a>
  </div>

  {% if page.image %}
  <header class="post-hero mb5 sans-serif" style="background-image: url('{{ page.image }}');">
    <div class="post-hero__inner">
      <h1 class="post-hero__title lh-title fw7 f2 f1-ns mt0 mb3 bg-white dib ph4 pv3">
        {{ page.title }}
      </h1>
    </div>
  </header>
  <div class="mid-gray f5 lh-title mb5 tc">
    <time datetime="{{ page.date }}">{{ page.date | date: "%B %d, %Y" }}</time>
    <span class="mh2">·</span>
    <span>{{ page.date | timeago }}</span>
    <span class="dn pageviews-container">
      <span class="mh2">·</span>
      <span><span class="pageviews-count">0</span> views</span>
    </span>
  </div>
  {% else %}
  <header class="layout-post mb5">
    <h1 class="lh-title fw6 mt0 mb2">{{ page.title }}</h1>
    <div class="mid-gray f5 lh-title">
      <time datetime="{{ page.date }}">{{ page.date | date: "%B %d, %Y" }}</time>
      <span class="mh2">·</span>
      <span>{{ page.date | timeago }}</span>
      <span class="dn pageviews-container">
        <span class="mh2">·</span>
        <span><span class="pageviews-count">0</span> views</span>
      </span>
    </div>
  </header>
  {% endif %}

  <article class="layout-post layout-{{ page.layout }} external-icon lh-copy f5">
    {{ content }}
  </article>

  {% include links-external.html %}
</main>
{% include footer.html %}
<script src="https://cdn.jsdelivr.net/combine/npm/prismjs@latest,npm/medium-zoom@latest"></script>
<script>
  fetch(`https://count.vercel.app/kikobeats/${window.location.pathname.substring(1).replace(/\/$/, '')}?incr`)
    .then(res => res.json())
    .then(count => {
      var container = document.querySelector('.pageviews-container')
      var el = document.querySelector('.pageviews-count')
      if (!container || !el) return
      container.classList.remove('dn')
      el.textContent = Number(count).toLocaleString('en-US')
    })
    .catch(() => {})
</script>
<script>
  document.addEventListener("DOMContentLoaded", event => {
    mediumZoom('.layout-post img')

    const cards = document.querySelectorAll('.card-preview')
    cards.forEach(card => {
      const url = card.getAttribute('href')
      if (!url) return

      fetch(`https://api.microlink.io/?url=${encodeURIComponent(url)}`)
        .then(res => res.json())
        .then(item => {
          const { title, description, image, logo, publisher } = item.data
          card.innerHTML = `
             ${image?.url ? `<div class="card-preview-image" style="background-image: url('${image.url}');"></div>` : ''}
             <div class="card-preview-content">
               <div class="card-preview-title">${title}</div>
               <div class="card-preview-desc">${description}</div>
               <div class="card-preview-footer">
                   ${logo?.url ? `<img class="card-preview-logo" src="${logo.url}" />` : ''}
                   <span>${publisher}</span>
               </div>
             </div>
           `
           card.classList.add('is-loaded')
        })
        .catch(e => console.error(e))
    })
  })
</script>
<script>
  const loadScript = src => new Promise(function (resolve, reject) {
    var s
    s = document.createElement('script')
    s.src = src
    s.onload = resolve
    s.onerror = reject
    document.head.appendChild(s)
  })

  embedRunkit = async selector => {
    const isRunkitLoaded = window.document.querySelector('#runkit')
    if (!isRunkitLoaded) await loadScript('https://embed.runkit.com')

    Array.from(document.querySelectorAll(selector)).forEach(element => {
      RunKit.createNotebook({
        element,
        source: element.textContent,
        nodeVersion: '18',
        clearParentContents: true,
        onLoad: () => {
          const iframe = element.querySelector('iframe')
          element.style.border = 0
          element.style.width = 'calc(100% + 200px)'
          iframe.style.position = 'relative'
          iframe.style.left = '-84px'
          iframe.style.margin = 0
        }
      })
    })

  }

  embedRunkit('.runkit')
</script>
